<!--
    In Class Assignment

    Write a JavaScript program that defines an array of objects stores it in browser storage. The object can be Each produce
    object will have the following attributes:

    - id - a unique identifier
    - name - the name of the item
    - unitCost - the unit cost if the item
    - quantity - initialize to 0

    Use the following guidance:

    - Initialize an empty array and store it.
    - Write a method to add an object to the array in storage. The method should include the parameters necessary to create
      the object.
    - Use a method to find an object by id in storage and increment its quantity by 1.
    - Use a method to find an object by id in storage and decrement its quantity by 1.
    - Display the contents of the array in the browser and update after each time the array is modified.

-->
<html>
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body onload="initStorage()">
  <div class = "container">
      <div class = "row">
        <div class = "col-3">
          <button onclick = "addItems()">Add to Storage</button>
        </div>
        <br>
        <div id = "quantityChanges" class = "col-3">
          <div class = "row" style = "padding: 20px;">
            <button onclick = "increaseQty('04852')">Add an Orange</button> 
            <button onclick = "decreaseQty('04852')">Remove an Orange</button>
          </div>
          <br>
          <div class = "row" style = "padding: 20px;">
            <button onclick = "increaseQty('04853')">Add an Apple</button> 
            <button onclick = "decreaseQty('04853')">Remove an Apple</button>
          </div>
          <br>
          <div class = "row" style = "padding: 20px;">
            <button onclick = "increaseQty('04854')">Add a Banana</button> 
            <button onclick = "decreaseQty('04854')">Remove a Banana</button>
          </div>
          <br>
          <div class = "row" style = "padding: 20px;">
            <button onclick = "increaseQty('04855')">Add a Head of Lettuce</button> 
            <button onclick = "decreaseQty('04855')">Remove a Head of Lettuce</button>
          </div>
          <br>
          <div class = "row" style = "padding: 20px;">
            <button onclick = "increaseQty('04856')">Add an Ear of Corn</button> 
            <button onclick = "decreaseQty('04856')">Remove an Ear of Corn</button>
          </div>
        </div>
        <br>
        <div id = "items" class = "col-6"></div>
      </div>
    </div>
  <script>
    const items = [];

    function initStorage() {
      let itemsJSON = JSON.stringify(items);
      sessionStorage.setItem("items", itemsJSON);
    }

    function addItems() {
      let items = JSON.parse(sessionStorage.getItem("items"));

      const item1 = {"id": '04852', "name": "Orange", "unitCost": 0.86, "quantity": 1};
      items.push(item1);

      const item2 = {"id": '04853', "name": "Apple", "unitCost": 1.29, "quantity": 1};
      items.push(item2);

      const item3 = {"id": '04854', "name": "Banana", "unitCost": 0.62, "quantity": 1};
      items.push(item3);

      const item4 = {"id": '04855', "name": "Lettuce", "unitCost": 1.29, "quantity": 1};
      items.push(item4);

      const item5 = {"id": '04856', "name": "Corn", "unitCost": 1.25, "quantity": 1};
      items.push(item5);

      let itemsJSON = JSON.stringify(items);
      sessionStorage.setItem("items", itemsJSON);

      displayArray();
    }

    function increaseQty(id) {
      let items = JSON.parse(sessionStorage.getItem("items"));

      for (let i = 0; i < items.length; i++) {
        if (id === items[i].id) {
          items[i].quantity += 1;
        }
      }

      let itemsJSON = JSON.stringify(items);
      sessionStorage.setItem("items", itemsJSON);

      displayArray();
    }

    function decreaseQty(id) {
      let items = JSON.parse(sessionStorage.getItem("items"));

      for (let i = 0; i < items.length; i++) {
        if (id === items[i].id) {
          items[i].quantity -= 1;
        }
      }

      let itemsJSON = JSON.stringify(items);
      sessionStorage.setItem("items", itemsJSON);

      displayArray();
    }

    function displayArray() {
      let items = JSON.parse(sessionStorage.getItem("items"));

      document.getElementById("items").innerHTML = "";

      for (let i = 0; i < items.length; i++) {
        document.getElementById("items").innerHTML += `item ${i + 1}:<br>id: ${items[i].id}<br>name: ${items[i].name}<br>price: $${(items[i].unitCost * items[i].quantity).toFixed(2)}<br>quantity: ${items[i].quantity}<br><br>`;
      }
    }
  </script>
</body>
</html>